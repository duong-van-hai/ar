<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>AR Engine Check</title>
    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
    <style>
        body { margin: 0; overflow: hidden; }
        #debug-info {
            position: fixed; top: 10px; left: 10px; z-index: 1000;
            background: rgba(0,0,0,0.7); color: white; padding: 10px;
            font-family: monospace; font-size: 12px; pointer-events: none;
        }
    </style>
</head>

<body>
    <div id="debug-info">Đang khởi tạo... Hãy soi vào Hiro Marker</div>

    <a-scene embedded arjs="sourceType: webcam; debugUIEnabled: false;">
        <a-assets>
            <a-asset-item id="engineModel" src="motorcycle_4_stroke_engine.glb"></a-asset-item>
        </a-assets>

        <a-marker preset="hiro" id="hiro-marker">
            <a-sphere position="0 0 0" radius="0.05" color="red"></a-sphere>

            <a-entity 
                id="main-model"
                gltf-model="#engineModel"
                scale="0.05 0.05 0.05" 
                position="0 0.5 0"
                rotation="0 0 0"
                visible="true">
            </a-entity>
        </a-marker>

        <a-entity camera></a-entity>
    </a-scene>

    <script>
        const info = document.getElementById('debug-info');
        const model = document.querySelector('#main-model');

        // Báo cáo trạng thái khi tìm thấy Marker
        document.querySelector('#hiro-marker').addEventListener('markerFound', () => {
            info.innerHTML = "Trạng thái: ĐÃ THẤY MARKER <br> Đang đợi nạp file 3D...";
            info.style.color = "#00FF00";
        });

        // Kiểm tra xem file 3D đã load thành công chưa
        model.addEventListener('model-loaded', () => {
            info.innerHTML = "Trạng thái: HOÀN TẤT <br> Đã nạp thành công động cơ!";
            info.style.color = "cyan";
        });

        model.addEventListener('model-error', (e) => {
            info.innerHTML = "Trạng thái: LỖI FILE 3D <br> Kiểm tra lại tên file trên GitHub!";
            info.style.color = "red";
        });
    </script>
</body>
</html>
