<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>AR Simple Box</title>
    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
    <style>
        body { margin: 0; overflow: hidden; background: #000; }
        /* Hiển thị camera làm nền phía dưới */
        #webcam {
            position: fixed; top: 0; left: 0;
            width: 100%; height: 100%;
            object-fit: cover; z-index: -1;
        }
        #overlay {
            position: absolute; top: 10px; width: 100%;
            text-align: center; color: white; z-index: 10;
            font-family: Arial, sans-serif; background: rgba(0,0,0,0.5);
        }
    </style>
</head>
<body>

    <div id="overlay">Đang kiểm tra đồ họa AR...</div>
    <video id="webcam" autoplay playsinline></video>

    <a-scene embedded vr-mode-ui="enabled: false" renderer="alpha: true;">
        
        <a-box id="myBox" 
               position="0 1.2 -2" 
               width="0.6" height="0.4" depth="0.3" 
               color="#4CC3D9"
               animation="property: rotation; to: 0 360 360; loop: true; dur: 5000; easing: linear">
        </a-box>

        <a-entity light="type: ambient; intensity: 1.5"></a-entity>
        <a-entity light="type: directional; intensity: 1" position="-1 2 1"></a-entity>

        <a-entity camera></a-entity>
    </a-scene>

    <script>
        // Lệnh mở Camera chính (camera sau)
        const video = document.getElementById('webcam');
        navigator.mediaDevices.getUserMedia({ 
            video: { facingMode: "environment" } 
        })
        .then(stream => { 
            video.srcObject = stream;
            document.getElementById('overlay').innerText = "CAMERA OK - Tìm khối hộp màu xanh!";
        })
        .catch(err => {
            document.getElementById('overlay').innerText = "Lỗi Camera: " + err;
        });
    </script>
</body>

</html>
