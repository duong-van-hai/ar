<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>H·ªá Th·ªëng Ki·ªÉm Tra C√¥ng Ngh·ªá 10</title>
    <style>
        :root { --primary: #2c3e50; --secondary: #3498db; --success: #27ae60; --danger: #e74c3c; --light: #f4f7f6; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--light); margin: 0; padding: 20px; }
        .container { max-width: 900px; margin: auto; background: white; padding: 30px; border-radius: 15px; box-shadow: 0 5px 25px rgba(0,0,0,0.1); }
        .hidden { display: none; }
        .menu-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0; }
        .card { padding: 20px; border: 2px solid #eee; border-radius: 12px; cursor: pointer; text-align: center; transition: 0.3s; background: #fff; }
        .card:hover { border-color: var(--secondary); background: #f1f9ff; transform: translateY(-3px); }
        button { background: var(--secondary); color: white; border: none; padding: 12px 20px; border-radius: 6px; cursor: pointer; font-weight: bold; margin-top: 10px; }
        input, select { width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #ccc; border-radius: 6px; box-sizing: border-box; }
        .timer { position: fixed; top: 20px; right: 20px; background: var(--danger); color: white; padding: 12px 25px; border-radius: 50px; font-weight: bold; z-index: 100; }
        .question-box { margin-bottom: 20px; padding: 15px; border: 1px solid #eee; border-radius: 10px; }
        .correct { background: #d4edda; border-color: #c3e6cb; }
        .wrong { background: #f8d7da; border-color: #f5c6cb; }
    </style>
</head>
<body>

<div class="container">
    <div id="role-page">
        <h1 style="text-align:center; color: var(--primary);">H·ªÜ TH·ªêNG KI·ªÇM TRA C√îNG NGH·ªÜ 10</h1>
        <div class="menu-grid">
            <div class="card" onclick="showPage('student-auth')"><h2>üë®‚Äçüéì H·ªåC SINH</h2></div>
            <div class="card" onclick="showPage('teacher-auth')"><h2>üë®‚Äçüè´ GI√ÅO VI√äN</h2></div>
        </div>
    </div>

    <div id="student-auth" class="hidden">
        <button onclick="showPage('role-page')">‚Üê Quay l·∫°i</button>
        <h2>Th√¥ng tin h·ªçc sinh</h2>
        <input type="text" id="std-name" placeholder="Nh·∫≠p h·ªç v√† t√™n em...">
        <button onclick="loginStudent()" style="width:100%">V√ÄO L·ªöP</button>
    </div>

    <div id="student-home" class="hidden">
        <h2 id="welcome-std"></h2>
        <div class="menu-grid">
            <div class="card" onclick="showQuizListForStudent()">üìù L√†m B√†i Ki·ªÉm Tra</div>
        </div>
        <button onclick="showPage('role-page')" style="background:var(--danger)">ƒêƒÉng xu·∫•t</button>
    </div>

    <div id="teacher-auth" class="hidden">
        <button onclick="showPage('role-page')">‚Üê Quay l·∫°i</button>
        <h2>ƒêƒÉng nh·∫≠p qu·∫£n l√Ω</h2>
        <input type="password" id="tea-pass" placeholder="Nh·∫≠p m·∫≠t kh·∫©u">
        <button onclick="loginTeacher()" style="width:100%">X√ÅC NH·∫¨N</button>
    </div>

    <div id="teacher-home" class="hidden">
        <h2>B·∫£ng ƒêi·ªÅu Khi·ªÉn Gi√°o Vi√™n</h2>
        <div id="results-view">
            <h3>Danh s√°ch ƒëi·ªÉm s·ªë</h3>
            <div id="score-table-container"></div>
        </div>
        <br><button onclick="showPage('role-page')" style="background:var(--danger)">Tho√°t qu·∫£n l√Ω</button>
    </div>

    <div id="display-area" class="hidden">
        <div class="timer hidden" id="quiz-timer">00:00</div>
        <button id="back-home-btn" onclick="showPage('student-home')">‚Üê Quay l·∫°i</button>
        <div id="content-body" style="margin-top:20px"></div>
    </div>
</div>

<script>
    // D·ªÆ LI·ªÜU C√ÇU H·ªéI ƒê√É NH√öNG S·∫¥N T·ª™ FILE WORD C·ª¶A B·∫†N
    const PACKED_DATA = {
        quizzes: [{
            id: 1,
            name: "KI·ªÇM TRA CU·ªêI K·ª≤ 1 - C√îNG NGH·ªÜ 10",
            duration: 45,
            questions: [
                { q: "C√¥ng ngh·ªá l√† g√¨?", options: ["L√† h·ªá th·ªëng tri th·ª©c v·ªÅ m·ªçi quy lu·∫≠t...", "L√† vi·ªác ·ª©ng d·ª•ng c√°c nguy√™n l√≠ khoa h·ªçc...", "L√† gi·∫£i ph√°p, quy tr√¨nh, b√≠ quy·∫øt kƒ© thu·∫≠t...", "C√¥ng ngh·ªá th√∫c ƒë·∫©y khoa h·ªçc."], answer: "L√† gi·∫£i ph√°p, quy tr√¨nh, b√≠ quy·∫øt kƒ© thu·∫≠t..." },
                { q: "C·∫•u tr√∫c c·ªßa h·ªá th·ªëng kƒ© thu·∫≠t g·ªìm nh·ªØng th√†nh ph·∫ßn n√†o?", options: ["ƒê·∫ßu v√†o, ƒë·∫ßu ra v√† b·ªô ph·∫≠n h·ªìi ti·∫øp.", "ƒê·∫ßu v√†o, ƒë·∫ßu ra v√† b·ªô ph·∫≠n x·ª≠ l√≠.", "ƒê·∫ßu v√†o, ƒë·∫ßu ra v√† b·ªô ph·∫≠n ƒëi·ªÅu khi·ªÉn.", "ƒê·∫ßu v√†o, ƒë·∫ßu ra v√† b·ªô ph·∫≠n l∆∞u tr·ªØ."], answer: "ƒê·∫ßu v√†o, ƒë·∫ßu ra v√† b·ªô ph·∫≠n x·ª≠ l√≠." },
                { q: "Ng√†nh c√¥ng ngh·ªá n√†o bi·ªÉn ƒë·ªïi ƒëi·ªán nƒÉng th√†nh c∆° nƒÉng d·ª±a tr√™n nguy√™n l√≠ c·∫£m ·ª©ng ƒëi·ªán t·ª´?", options: ["C√¥ng ngh·ªá ƒëi·ªán ‚Äì ƒëi·ªán t·ª≠.", "C√¥ng ngh·ªá ƒëi·ªán ‚Äì c∆°.", "C√¥ng ngh·ªá ƒëi·ªÅu khi·ªÉn v√† t·ª± ƒë·ªông h√≥a.", "C√¥ng ngh·ªá ƒëi·ªán ‚Äì quang."], answer: "C√¥ng ngh·ªá ƒëi·ªán ‚Äì c∆°." },
                { q: "C√¥ng ngh·ªá m√¥ ph·ªèng c√°c ho·∫°t ƒë·ªông tr√≠ tu·ªá c·ªßa con ng∆∞·ªùi b·∫±ng m√°y m√≥c. ƒê√≥ l√† c√¥ng ngh·ªá g√¨?", options: ["C√¥ng ngh·ªá tr√≠ tu·ªá nh√¢n t·∫°o.", "C√¥ng ngh·ªá Internet v·∫°n v·∫≠t.", "C√¥ng ngh·ªá Robot th√¥ng minh.", "C√¥ng ngh·ªá in 3D."], answer: "C√¥ng ngh·ªá tr√≠ tu·ªá nh√¢n t·∫°o." },
                { q: "S·∫£n ph·∫©m n√†o sau ƒë√¢y l√† s·∫£n ph·∫©m ƒë·∫∑c tr∆∞ng c·ªßa cu·ªôc C√°ch m·∫°ng c√¥ng nghi·ªáp l·∫ßn th·ª© t∆∞?", options: ["M√°y t√≠nh.", "Robot th√¥ng minh.", "M√°y d·ªát d√πng ƒë·ªông c∆° h∆°i n∆∞·ªõc.", "B√≥ng ƒë√®n s·ª£i ƒë·ªët."], answer: "Robot th√¥ng minh." },
                { q: "Ng√†nh ngh·ªÅ n√†o thu·ªôc ng√†nh c∆° kh√≠?", options: ["Kƒ© thu·∫≠t l·∫Øp ƒë·∫∑t ƒëi·ªán.", "S·ª≠a ch·ªØa, c∆° kh√≠ ch·∫ø t·∫°o.", "H·ªá th·ªëng ƒëi·ªán.", "V·∫≠n h√†nh nh√† m√°y ƒëi·ªán gi√≥."], answer: "S·ª≠a ch·ªØa, c∆° kh√≠ ch·∫ø t·∫°o." },
                { q: "Theo TCVN 7285:2003 quy ƒë·ªãnh kh·ªï gi·∫•y c·ªßa c√°c b·∫£n v·∫Ω, c√≥ bao nhi√™u kh·ªï gi·∫•y ch√≠nh?", options: ["3", "4", "5", "7"], answer: "5" },
                { q: "Theo ti√™u chu·∫©n tr√¨nh b√†y b·∫£n v·∫Ω kƒ© thu·∫≠t, ƒë∆∞·ªùng gi√≥ng k√≠ch th∆∞·ªõc ƒë∆∞·ª£c v·∫Ω b·∫±ng n√©t v·∫Ω n√†o?", options: ["N√©t li·ªÅn m·∫£nh.", "N√©t ƒë·ª©t m·∫£nh.", "N√©t li·ªÅn ƒë·∫≠m.", "N√©t l∆∞·ª£n s√≥ng."], answer: "N√©t li·ªÅn m·∫£nh." }
            ]
        }]
    };

    let db = { results: JSON.parse(localStorage.getItem('edu_results')) || [] };

    function showPage(id) {
        document.querySelectorAll('.container > div').forEach(div => div.classList.add('hidden'));
        document.getElementById(id).classList.remove('hidden');
        if (id === 'quiz-timer') document.getElementById(id).classList.add('hidden');
    }

    function loginTeacher() {
        if(document.getElementById('tea-pass').value === '123') {
            showPage('teacher-home');
            showResults();
        } else alert('Sai m·∫≠t kh·∫©u!');
    }

    function loginStudent() {
        let name = document.getElementById('std-name').value;
        if(!name) return alert("Nh·∫≠p t√™n em!");
        document.getElementById('welcome-std').innerText = "Ch√†o em: " + name;
        showPage('student-home');
    }

    function showQuizListForStudent() {
        showPage('display-area');
        let html = '<h2>Danh s√°ch b√†i ki·ªÉm tra</h2>';
        PACKED_DATA.quizzes.forEach(quiz => {
            html += `<div class="card" style="padding:15px; flex-direction:row; justify-content:space-between; display:flex; align-items:center;">
                <span>${quiz.name}</span>
                <button onclick="startQuiz(${quiz.id})">V√†o thi</button>
            </div>`;
        });
        document.getElementById('content-body').innerHTML = html;
    }

    let timer;
    function startQuiz(id) {
        let quiz = PACKED_DATA.quizzes.find(x => x.id === id);
        showPage('display-area');
        document.getElementById('quiz-timer').classList.remove('hidden');
        document.getElementById('back-home-btn').classList.add('hidden');
        
        let html = `<h3>${quiz.name}</h3>`;
        quiz.questions.forEach((q, i) => {
            html += `<div class="question-box">
                <p><b>C√¢u ${i+1}: ${q.q}</b></p>
                ${q.options.map(opt => `<label style="display:block; margin:5px 0;"><input type="radio" name="q${i}" value="${opt}"> ${opt}</label>`).join('')}
            </div>`;
        });
        html += `<button id="submit-btn" onclick="submitQuiz(${quiz.id})" style="background:var(--success); width:100%; padding:15px;">N·ªòP B√ÄI</button>`;
        document.getElementById('content-body').innerHTML = html;

        let timeLeft = quiz.duration * 60;
        timer = setInterval(() => {
            timeLeft--;
            let m = Math.floor(timeLeft/60), s = timeLeft%60;
            document.getElementById('quiz-timer').innerText = `${m}:${s<10?'0':''}${s}`;
            if(timeLeft <= 0) submitQuiz(id);
        }, 1000);
    }

    function submitQuiz(id) {
        clearInterval(timer);
        document.getElementById('quiz-timer').classList.add('hidden');
        document.getElementById('back-home-btn').classList.remove('hidden');
        
        let quiz = PACKED_DATA.quizzes.find(x => x.id === id);
        let score = 0;
        let reviewHtml = '<h3>K·∫øt qu·∫£ chi ti·∫øt:</h3>';

        quiz.questions.forEach((q, i) => {
            let selected = document.querySelector(`input[name="q${i}"]:checked`);
            let userAns = selected ? selected.value : "B·ªè tr·ªëng";
            let isCorrect = userAns.includes(q.answer.substring(0,10)); // So kh·ªõp t∆∞∆°ng ƒë·ªëi

            if(isCorrect) score++;
            reviewHtml += `<div class="question-box ${isCorrect ? 'correct' : 'wrong'}">
                <p><b>C√¢u ${i+1}: ${q.q}</b></p>
                <p>B·∫°n ch·ªçn: ${userAns} | ƒê√°p √°n ƒë√∫ng: ${q.answer}</p>
            </div>`;
        });

        let finalScore = (score/quiz.questions.length*10).toFixed(1);
        db.results.push({ name: document.getElementById('std-name').value, quiz: quiz.name, score: finalScore, date: new Date().toLocaleString() });
        localStorage.setItem('edu_results', JSON.stringify(db.results));

        document.getElementById('content-body').innerHTML = `<h2 style="text-align:center">ƒêI·ªÇM C·ª¶A B·∫†N: ${finalScore}</h2>` + reviewHtml;
    }

    function showResults() {
        let html = '<table border="1" style="width:100%; border-collapse:collapse;"><tr><th>T√™n</th><th>B√†i</th><th>ƒêi·ªÉm</th><th>Ng√†y</th></tr>';
        db.results.slice().reverse().forEach(r => {
            html += `<tr><td>${r.name}</td><td>${r.quiz}</td><td>${r.score}</td><td>${r.date}</td></tr>`;
        });
        document.getElementById('score-table-container').innerHTML = html + '</table>';
    }
</script>
</body>
</html>
