<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bản Đồ Tâm Trí - Premium</title>
    <style>
        :root {
            --glass: rgba(255, 255, 255, 0.1);
            --glass-border: rgba(255, 255, 255, 0.2);
            --text-color: #ffffff;
        }

        body, html {
            margin: 0; padding: 0; height: 100%;
            font-family: 'Plus Jakarta Sans', sans-serif;
            background: linear-gradient(-45deg, #0f2027, #203a43, #2c5364);
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
            overflow: hidden;
            color: var(--text-color);
        }

        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* Lớp phủ Sứ mệnh */
        #mission-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.85);
            backdrop-filter: blur(15px);
            display: flex; flex-direction: column; justify-content: center;
            align-items: center; z-index: 1000; text-align: center;
            padding: 40px; box-sizing: border-box; transition: 0.8s all ease;
        }

        #mission-overlay h1 { 
            font-size: 3rem; letter-spacing: 5px; margin-bottom: 30px;
            background: linear-gradient(to right, #58D68D, #4A90E2);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
        }

        .mission-card {
            background: var(--glass); border: 1px solid var(--glass-border);
            padding: 25px; border-radius: 20px; max-width: 600px;
            margin-bottom: 20px; backdrop-filter: blur(5px);
        }

        /* Lưới 3x3 */
        .grid-container {
            display: grid; grid-template-columns: repeat(3, 1fr);
            grid-template-rows: repeat(3, 1fr);
            height: 100vh; width: 100vw; gap: 20px; padding: 30px;
            box-sizing: border-box; transition: 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .grid-item {
            background: var(--glass);
            border: 1px solid var(--glass-border);
            border-radius: 24px;
            display: flex; align-items: center; justify-content: center;
            position: relative; overflow: hidden;
            transition: all 0.4s ease;
            backdrop-filter: blur(10px);
        }

        .grid-item::before {
            content: ""; position: absolute; top: 0; left: -100%;
            width: 100%; height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
            transition: 0.5s;
        }

        .grid-item:hover::before { left: 100%; }

        .grid-item:hover {
            transform: translateY(-10px) scale(1.03);
            background: rgba(255, 255, 255, 0.15);
            box-shadow: 0 20px 40px rgba(0,0,0,0.4), inset 0 0 20px var(--item-color);
            border: 1px solid var(--item-color);
        }

        .task-text {
            background: transparent; border: none; color: #fff;
            font-weight: 500; font-size: 1.2rem; text-align: center;
            width: 80%; outline: none; cursor: pointer;
            z-index: 2;
        }

        #back-btn {
            position: fixed; top: 30px; left: 30px;
            padding: 12px 25px; background: var(--glass);
            color: white; border: 1px solid var(--glass-border);
            border-radius: 15px; cursor: pointer; display: none;
            z-index: 100; backdrop-filter: blur(10px);
            font-weight: bold; transition: 0.3s;
        }

        #back-btn:hover { background: white; color: black; }

        button.start-btn {
            padding: 15px 40px; background: white; color: black;
            border: none; border-radius: 50px; font-weight: bold;
            cursor: pointer; font-size: 1rem; transition: 0.3s;
            margin-top: 20px;
        }
        button.start-btn:hover { transform: scale(1.1); box-shadow: 0 0 20px #58D68D; }
    </style>
</head>
<body>

    <div id="mission-overlay">
        <h1>BẢN ĐỒ TÂM TRÍ</h1>
        <div class="mission-card">
            <p><strong>Nhận diện:</strong> Ánh sáng dẫn dắt sự tự điều chỉnh.</p>
            <p><strong>Cân bằng:</strong> Điểm tựa cho tâm thế vững vàng.</p>
            <p><strong>Tập trung:</strong> Sức mạnh của sự tĩnh tại.</p>
        </div>
        <button class="start-btn" onclick="closeMission()">KÍCH HOẠT TÂM TRÍ</button>
    </div>

    <button id="back-btn" onclick="resetGrid()">← TỔNG QUAN</button>
    <div class="grid-container" id="mainGrid"></div>

    <script>
        const colors = ['#4A90E2', '#58D68D', '#F4D03F', '#EB984E', '#EC7063', '#A569BD', '#5D6D7E', '#45B39D', '#DC7633'];

        const data = [
            { title: "CÔNG VIỆC", tasks: ["Kỹ năng chuyên môn", "Kết nối mạng lưới", "Dự án trọng tâm", "Đề xuất sáng kiến", "Quản lý thời gian", "Báo cáo & Đánh giá", "Cập nhật hồ sơ", "Hỗ trợ đồng nghiệp", "Sắp xếp gọn gàng"] },
            { title: "SỨC KHỎE", tasks: ["Vận động 30 phút", "Ăn đủ rau xanh", "Uống 2L nước", "Ngủ đủ 8 tiếng", "Khám định kỳ", "10 phút thiền", "Theo dõi chỉ số", "Rời xa điện thoại", "Vệ sinh môi trường"] },
            { title: "TÀI CHÍNH", tasks: ["Theo dõi thu nhập", "Ghi chép chi tiêu", "Trích quỹ tiết kiệm", "Tìm hiểu đầu tư", "Lên kế hoạch trả nợ", "Thanh toán hóa đơn", "Lập danh sách mua sắm", "Đọc sách tài chính", "Mục tiêu tài chính lớn"] },
            { title: "HỌC TẬP", tasks: ["Đọc 10 trang sách", "Học ngoại ngữ mới", "Xem video khóa học", "Viết nhật ký", "Nghe Podcast tư duy", "Luyện kỹ năng mềm", "Ghi lại ý tưởng", "Tìm người cố vấn", "Thực hành thực tế"] },
            { title: "GIA ĐÌNH", tasks: ["Hỏi thăm bố mẹ", "Thời gian chất lượng", "Hỗ trợ việc nhà", "Lên kế hoạch kỷ niệm", "Chia sẻ kinh nghiệm", "Thảo luận tài chính", "Sửa chữa vật dụng", "Lắng nghe tâm sự", "Gắn kết sở thích"] },
            { title: "BẠN BÈ", tasks: ["Hỏi thăm bạn cũ", "Tham gia CLB mới", "Hẹn gặp cà phê", "Xây dựng uy tín", "Lọc mối quan hệ", "Hoạt động thiện nguyện", "Kết nối bạn bè", "Món quà bất ngờ", "Học từ người giỏi"] },
            { title: "GIẢI TRÍ", tasks: ["Thử món ăn mới", "Chơi nhạc cụ/Vẽ", "Chơi môn thể thao", "Xem phim yêu thích", "Du lịch cuối tuần", "Chăm sóc bộ sưu tập", "Chơi game trí tuệ", "Làm đồ thủ công", "Đi tham quan bảo tàng"] },
            { title: "DỰ ÁN RIÊNG", tasks: ["Nghiên cứu thị trường", "Lập lộ trình cụ thể", "Xây dựng nền tảng", "Thử nghiệm (MVP)", "Quản lý vốn", "Kế hoạch Marketing", "Tìm kiếm đối tác", "Kỷ luật 1 giờ/ngày", "Đo lường tiến độ"] },
            { title: "ƯỚC MƠ", tasks: ["Ghi lòng biết ơn", "Xác định mục đích", "Lập Vision Board", "Vượt qua nỗi sợ", "Tìm sự bình an", "Chia sẻ & Cho đi", "Học cách tha thứ", "Đọc triết học", "Cam kết bản thân"] }
        ];

        function closeMission() {
            const overlay = document.getElementById('mission-overlay');
            overlay.style.opacity = '0';
            overlay.style.transform = 'scale(1.2)';
            setTimeout(() => overlay.style.display = 'none', 800);
        }

        const mainGrid = document.getElementById('mainGrid');
        const backBtn = document.getElementById('back-btn');

        function createInitialGrid() {
            mainGrid.innerHTML = '';
            backBtn.style.display = 'none';
            data.forEach((item, index) => {
                const div = document.createElement('div');
                div.className = 'grid-item';
                div.style.setProperty('--item-color', colors[index]);
                const savedTitle = localStorage.getItem(`cat-${index}`) || item.title;
                div.innerHTML = `<div contenteditable="true" class="task-text" onblur="saveData('cat-${index}', this.innerText)" onclick="event.stopPropagation()">${savedTitle}</div>`;
                div.onclick = () => zoomIntoColor(index);
                mainGrid.appendChild(div);
            });
        }

        function zoomIntoColor(catIndex) {
            mainGrid.style.transform = 'scale(0.9)';
            mainGrid.style.opacity = '0';
            
            setTimeout(() => {
                mainGrid.innerHTML = '';
                backBtn.style.display = 'block';
                const category = data[catIndex];
                for (let i = 0; i < 9; i++) {
                    const subDiv = document.createElement('div');
                    subDiv.className = 'grid-item';
                    subDiv.style.setProperty('--item-color', colors[catIndex]);
                    const storageKey = `task-${catIndex}-${i}`;
                    const savedTask = localStorage.getItem(storageKey) || category.tasks[i];
                    subDiv.innerHTML = `<div contenteditable="true" class="task-text" onblur="saveData('${storageKey}', this.innerText)">${savedTask}</div>`;
                    mainGrid.appendChild(subDiv);
                }
                mainGrid.style.transform = 'scale(1)';
                mainGrid.style.opacity = '1';
            }, 300);
        }

        function saveData(key, value) { localStorage.setItem(key, value); }
        function resetGrid() { 
            mainGrid.style.transform = 'scale(1.1)';
            mainGrid.style.opacity = '0';
            setTimeout(() => {
                createInitialGrid();
                mainGrid.style.transform = 'scale(1)';
                mainGrid.style.opacity = '1';
            }, 300);
        }
        createInitialGrid();
    </script>
</body>
</html>
