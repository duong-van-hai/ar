<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>KIỂM TRA CÔNG NGHỆ 11</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        :root { --blue: #1a73e8; --bg: #f0f2f5; --text: #3c4043; }
        body { font-family: sans-serif; background: var(--bg); line-height: 1.6; padding: 10px; }
        .container { max-width: 650px; margin: auto; background: white; padding: 25px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        h1 { text-align: center; color: var(--blue); margin-bottom: 25px; }
        .input-group { margin-bottom: 20px; text-align: center; }
        input[type="text"] { width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 8px; box-sizing: border-box; font-size: 1.1rem; text-align: center; }
        .quiz-item { margin-bottom: 30px; padding: 15px; border: 1px solid #eee; border-radius: 10px; }
        .question { font-weight: bold; margin-bottom: 12px; color: #202124; }
        label { display: block; padding: 12px; margin: 8px 0; background: #f8f9fa; border-radius: 8px; cursor: pointer; border: 1px solid transparent; transition: 0.2s; }
        label:hover { background: #e8f0fe; border-color: var(--blue); }
        input[type="radio"] { margin-right: 12px; transform: scale(1.2); }
        .btn { width: 100%; padding: 16px; color: white; border: none; border-radius: 8px; font-size: 1.2rem; font-weight: bold; cursor: pointer; transition: 0.3s; margin-top: 10px; }
        .btn-blue { background: var(--blue); }
        .btn-blue:hover { background: #1557b0; }
        .btn-gray { background: #6c757d; }
        #result { margin-top: 20px; padding: 30px; text-align: center; border-radius: 12px; display: none; background: #fff; border: 2px solid var(--blue); }
        .score { font-size: 3rem; color: #d93025; font-weight: bold; margin: 15px 0; }
        .hidden { display: none; }
    </style>
</head>
<body>

<div class="container" id="setup-box">
    <h1>KIỂM TRA CÔNG NGHỆ 11</h1>
    <p style="text-align: center; color: #666;">Bộ đề 15 câu hỏi - Thời gian: 20 phút</p>
    <div class="input-group">
        <input type="text" id="std-name" placeholder="Nhập họ và tên của em...">
        <button class="btn btn-blue" onclick="startQuiz()">BẮT ĐẦU LÀM BÀI</button>
    </div>
</div>

<div class="container hidden" id="quiz-box">
    <h2 id="display-name" style="text-align:center; color: #555;"></h2>
    <div id="quiz-content"></div>
    <button class="btn btn-blue" onclick="submitQuiz()">NỘP BÀI KIỂM TRA</button>
</div>

<div class="container hidden" id="result"></div>

<script>
    // Ngân hàng câu hỏi Lớp 11
    const bank = [
        { q: "Vai trò cơ khí trong ngành giao thông vận tải thể hiện qua?", options: ["Hệ thống tưới tự động", "Động cơ ô tô, xe máy", "Máy chụp MRI", "Máy xay lúa"], a: "Động cơ ô tô, xe máy" },
        { q: "Ai trực tiếp lắp đặt động cơ vào khung xe ô tô?", options: ["Giám đốc nhà máy", "Kỹ sư thiết kế", "Công nhân lắp ráp cơ khí", "Nhân viên bảo vệ"], a: "Công nhân lắp ráp cơ khí" },
        { q: "Tính chịu ăn mòn của vật liệu cơ khí thuộc tính chất nào?", options: ["Vật lý", "Cơ học", "Công nghệ", "Hóa học"], a: "Hóa học" },
        { q: "Khả năng chống lại biến dạng dẻo hoặc phá hủy của ngoại lực gọi là?", options: ["Tính đúc", "Độ bền", "Tính dẫn điện", "Khối lượng riêng"], a: "Độ bền" },
        { q: "Vật liệu nào có thể ghi nhớ được hình dạng ban đầu?", options: ["Hợp kim nhớ hình", "Vật liệu nano", "Thép", "Gang"], a: "Hợp kim nhớ hình" },
        { q: "Phương pháp nào sau đây thuộc nhóm gia công có phoi?", options: ["Đúc", "Rèn", "Hàn", "Tiện"], a: "Tiện" },
        { q: "Ưu điểm của chế tạo phôi bằng phương pháp hàn là?", options: ["Mối hàn kém bền", "Tiết kiệm kim loại", "Dễ cong vênh", "Mối hàn hở"], a: "Tiết kiệm kim loại" },
        { q: "Chi tiết gắn dao trên máy tiện vạn năng là?", options: ["Mâm cặp", "Bàn gá dao", "Ụ động", "Hộp tốc độ"], a: "Bàn gá dao" },
        { q: "Trình tự sản xuất cơ khí đúng là?", options: ["Phôi -> Gia công -> Xử lý -> Lắp ráp -> Đóng gói", "Gia công -> Phôi -> Lắp ráp", "Lắp ráp -> Gia công -> Phôi", "Phôi -> Lắp ráp -> Gia công"], a: "Phôi -> Gia công -> Xử lý -> Lắp ráp -> Đóng gói" },
        { q: "Sơn, mạ, phủ hóa chất chống ăn mòn thuộc bước nào?", options: ["Chế tạo phôi", "Gia công", "Xử lý và bảo vệ bề mặt", "Lắp ráp"], a: "Xử lý và bảo vệ bề mặt" },
        { q: "Đặc điểm nổi bật của Robot công nghiệp là?", options: ["Làm theo chương trình lập sẵn", "Có cảm xúc như người", "Tự sửa chữa mọi lỗi", "Tốc độ nhanh như điện"], a: "Làm theo chương trình lập sẵn" },
        { q: "Robot vận chuyển thùng hàng lên pallet thuộc ứng dụng khâu nào?", options: ["Lắp ráp", "Kiểm tra", "Vận chuyển và xếp dỡ", "Gia công"], a: "Vận chuyển và xếp dỡ" },
        { q: "Hàm lượng carbon trong gang so với thép là?", options: ["Thấp hơn", "Bằng nhau", "Cao hơn", "Không có carbon"], a: "Cao hơn" },
        { q: "Hợp kim của sắt với carbon có hàm lượng C < 2,14% gọi là?", options: ["Gang", "Thép", "Đồng", "Nhôm"], a: "Thép" },
        { q: "Phương pháp gia công áp lực bao gồm?", options: ["Tiện, phay", "Đúc, hàn", "Rèn, dập", "Khoan, doa"], a: "Rèn, dập" },
        { q: "Nguyên lý của phương pháp đúc là?", options: ["Rót lỏng vào khuôn", "Đập bằng búa", "Cắt bằng dao", "Nối bằng điện"], a: "Rót lỏng vào khuôn" },
        { q: "Ngành nghề nào thiết kế hệ thống cơ khí?", options: ["Kỹ sư cơ khí", "Thợ lắp ráp", "Thợ hàn", "Thợ tiện"], a: "Kỹ sư cơ khí" },
        { q: "Chuyển động chính khi tiện là gì?", options: ["Dao quay tròn", "Phôi quay tròn", "Phôi tịnh tiến", "Bàn máy lên xuống"], a: "Phôi quay tròn" }
    ];

    let questions = [];

    function startQuiz() {
        const name = document.getElementById('std-name').value.trim();
        if (name.length < 2) {
            alert("Em hãy nhập họ tên trước khi làm bài!");
            return;
        }

        // Trộn và lấy đúng 15 câu
        questions = bank.sort(() => 0.5 - Math.random()).slice(0, 15);

        document.getElementById('setup-box').classList.add('hidden');
        document.getElementById('quiz-box').classList.remove('hidden');
        document.getElementById('display-name').innerText = "Học sinh: " + name.toUpperCase();

        renderQuiz();
        window.scrollTo(0, 0);
    }

    function renderQuiz() {
        const display = document.getElementById('quiz-content');
        display.innerHTML = '';
        questions.forEach((item, i) => {
            let opts = [...item.options].sort(() => 0.5 - Math.random());
            let html = `<div class="quiz-item">
                <div class="question">Câu ${i+1}: ${item.q}</div>
                ${opts.map(opt => `<label><input type="radio" name="q${i}" value="${opt}"> ${opt}</label>`).join('')}
            </div>`;
            display.innerHTML += html;
        });
    }

    function submitQuiz() {
        let score = 0;
        let count = 0;

        questions.forEach((item, i) => {
            const sel = document.querySelector(`input[name="q${i}"]:checked`);
            if (sel) {
                count++;
                if (sel.value === item.a) score++;
            }
        });

        if (count < questions.length) {
            if (!confirm("Em còn câu chưa làm. Vẫn muốn nộp bài?")) return;
        }

        const finalScore = (score / questions.length * 10).toFixed(1);
        const name = document.getElementById('std-name').value.trim();

        document.getElementById('quiz-box').classList.add('hidden');
        const res = document.getElementById('result');
        res.classList.remove('hidden');
        res.style.display = 'block';
        res.innerHTML = `
            <h2>KẾT QUẢ CỦA: ${name.toUpperCase()}</h2>
            <div class="score">${finalScore} ĐIỂM</div>
            <p>Đúng: ${score}/${questions.length} câu</p>
            <button class="btn btn-gray" onclick="location.reload()">LÀM ĐỀ KHÁC</button>
        `;
        window.scrollTo(0, 0);
    }
</script>
</body>
</html>
